<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="qnaMapper">

	<resultMap type="QNA" id="resultQNA" >
		<id column="q_no" property="q_no" />
		<result column="q_writer" property="q_writer" />
		<result column="q_title" property="q_title" />
		<result column="q_date" property="q_date" />
		<result column="q_content" property="q_content" />
		<result column="q_upfile" property="q_upfile" />
		<result column="readcount" property="readcount" />
	</resultMap>

	<!--  리스트 전체 목록 보기  -->
	<select id="selectAll" resultMap="resultQNA">
		select * 
		from question
	</select> 
	
	<!-- 조회수 1증가 -->
	<update id="addReadCount" parameterType="_int" >
		update question
		set readcount = readcount + 1
		where q_no = #{ q_no }
	</update>
	
	
	<!-- 번호로 상세보기  -->
	<select id="selectQNA" parameterType="_int" resultMap="resultQNA" >
		select * from question
		where q_no = #{ q_no }
	</select>
	

	
	<select id="getListCount" resultType="_int">
		select count(*) from question
	</select>
	
		<select id="selectList" parameterType="Paging" resultMap="resultQNA">
		<![CDATA[
			SELECT *  
			FROM (SELECT ROWNUM RNUM, q_no, q_writer, 
						  q_title, q_date, q_content, q_upfile, readcount
			       FROM (SELECT * FROM QUESTION 
			              ORDER BY q_no DESC))  
			where rnum >= #{startRow} and rnum <= #{endRow}
		]]>
	</select>
	
</mapper>

